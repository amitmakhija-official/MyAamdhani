@model MyAamdhani.Models.Product

@{
    ViewBag.Title = "Manage";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutManage.cshtml";
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
 <!-- Container-fluid starts-->
    <div class="container-fluid">
        <div class="page-header">
            <div class="row">
                <div class="col-lg-6">
                    <div class="page-header-left">
                        <h3>
                            Add Products
                            <small>MyAamdhani Admin panel</small>
                        </h3>
                    </div>
                </div>
                <div class="col-lg-6">
                    <ol class="breadcrumb pull-right">
                        <li class="breadcrumb-item"><a href="index.html"><i data-feather="home"></i></a></li>
                        <li class="breadcrumb-item">Digital</li>
                        <li class="breadcrumb-item active">Add Product</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <!-- Container-fluid Ends-->
    <!-- Container-fluid starts-->
    <div class="container-fluid">
        <div class="row product-adding">

            <div class="col-xl-12">
                <div class="card">
                    <div class="card-body">
                        <div class="digital-add needs-validation">
                            <div class="form-group">
                                <label class="d-block" for="Category_Id">
                                    @Html.DropDownList("Select Category", (IEnumerable<SelectListItem>)ViewBag.CategoryList, "Select Category", new { @class = "form-control", @id = "Category_Id" })

                                </label>
                                @*<label class="col-form-label"><span>*</span> Categories</label>
                                    <select class="custom-select" required="">
                                    <option value="">--Select--</option>
                                    <option value="1">eBooks</option>
                                    <option value="2">Graphic Design</option>
                                    <option value="3">3D Impact</option>
                                    <option value="4">Application</option>
                                    <option value="5">Websites</option>
                                    </select>*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-6">
                <div class="card">
                    <div class="card-header">
                        <h5>General</h5>
                    </div>
                    <div class="card-body">
                        <div class="digital-add needs-validation">
                            <div class="form-group">
                                <label for="txt_productName" class="col-form-label pt-0"><span>*</span> Product Name</label>
                                <input class="form-control" id="txt_productName" type="text" required="">
                            </div>




                            <div class="form-group">
                                <label class="d-block" for="SubCategory_Id">
                                    @Html.DropDownList("Select Sub-Category", (IEnumerable<SelectListItem>)ViewBag.SubCategoryList, "Select Sub-Category", new { @class = "form-control", @id = "SubCategory_Id" })

                                </label>
                                @*<label class="col-form-label"><span>*</span> Sub-Categories</label>
                                    <select class="custom-select" required="">
                                    <option value="">--Select--</option>
                                    <option value="1">eBooks</option>
                                    <option value="2">Graphic Design</option>
                                    <option value="3">3D Impact</option>
                                    <option value="4">Application</option>
                                    <option value="5">Websites</option>
                                    </select>*@
                            </div>

                            <div class="form-group">
                                <label class="col-form-label">Sort Summary</label>
                                <textarea rows="5" cols="12" id="product_Description" class="form-control" style="max-width:100%;resize:none;height:85px"></textarea>
                            </div>

                            @*<div class="form-group">
                                <label class="col-form-label"><span>*</span> Status</label>
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                <label class="d-block" for="edo-ani">
                                <input class="radio_animated" id="edo-ani" type="radio" name="rdo-ani">
                                Active
                                </label>
                                <label class="d-block" for="edo-ani1">
                                <input class="radio_animated" id="edo-ani1" type="radio" name="rdo-ani">
                                InActive
                                </label>
                                </div>
                                </div>*@

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Price, MOQ</h5>
                    </div>
                    <div class="card-body">
                        <div class="digital-add needs-validation">
                            <div class="form-group">
                                <label for="txt_minOrder" class="col-form-label pt-0"><span>*</span> Min. sets to order</label>
                                <input class="form-control" id="txt_minOrder" type="text" required="">
                            </div>
                            <div class="form-group">
                                <label for="txt_priceperPiece" class="col-form-label pt-0"><span>*</span> Price per piece(Min 150Rs.)</label>
                                <input class="form-control" id="txt_priceperPiece" type="text" required="">
                            </div>
                            <div class="form-group">
                                <label for="txt_mrpperPiece" class="col-form-label pt-0"><span>*</span> MRP per piece</label>
                                <input class="form-control" id="txt_mrpperPiece" type="text" required="">
                            </div>
                            @*<div class="form-group">
                                    <label for="txt_availableQuantity" class="col-form-label pt-0"><span>*</span> Available Quantity</label>
                                    <input class="form-control" id="txt_availableQuantity" type="text" required="">
                                </div>*@
                            <div class="form-group">
                                <label for="txt_skuId" class="col-form-label pt-0"><span>*</span> SKU ID</label>
                                <input class="form-control" id="txt_skuId" type="text" required="">
                            </div>
                            <div class="form-group">
                                <label for="txt_hsnCode" class="col-form-label pt-0"><span>*</span> HSN Code</label>
                                <input class="form-control" id="txt_hsnCode" type="text" required="">
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            @*<div class="col-xl-6">
                <div class="card">
                <div class="card-header">
                <h5>Add Description</h5>
                </div>

                <div class="card-body">
                <div class="digital-add needs-validation">
                <div class="form-group mb-0">
                <div class="description-sm">
                <textarea id="editor1" name="editor1" cols="10" rows="4"></textarea>
                </div>
                </div>
                </div>
                </div>
                </div>
                <div class="card">
                <div class="card-header">
                <h5>Meta Data</h5>
                </div>
                <div class="card-body">
                <div class="digital-add needs-validation">
                <div class="form-group">
                <label for="validationCustom05" class="col-form-label pt-0"> Meta Title</label>
                <input class="form-control" id="validationCustom05" type="text" required="">
                </div>
                <div class="form-group">
                <label class="col-form-label">Meta Description</label>
                <textarea rows="4" cols="12"></textarea>
                </div>
                <div class="form-group mb-0">
                <div class="product-buttons text-center">
                <button type="button" class="btn btn-primary" onclick="showMe()">Add</button>
                <button type="button" class="btn btn-light">Discard</button>
                </div>
                </div>
                </div>
                </div>
                </div>
                </div>*@

            <div class="col-xl-12">
                <div class="card">
                    @*<div class="card-header">
                        <h5>No. of Color</h5>
                        </div>*@
                    <div class="card-body">
                        <div class="digital-add needs-validation">
                            <label class="col-form-label"><span style="color:red">*</span> No. of Color</label>
                            <div class="form-group">
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                    <label class="d-block" for="NoColor">
                                        <select id="NoColor" style="width:968px;" onchange="showImages()" class="form-control">
                                            <option value="1" selected="selected">1</option>
                                            @for (int i = 2; i <= 12; i++)
                                        {
                                        <option value="@i">@i</option>
                                        }
                                        </select>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-12" id="divShowUploadImages"></div>


            <div class="col-xl-12 hide">
                <div class="card">
                    <div class="card-header">
                        <h5>Images</h5>
                    </div>
                    <div class="card-body">
                        <div class="digital-add needs-validation">
                            <label class="col-form-label"><span style="color:red">*</span> Images Upload</label>

                            <div class="form-group">
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                    <label class="d-block" for="imgupload1">
                                        <input type="file" class="dropify" id="imgupload1" data-default-file="" />
                                    </label>



                                    <label class="d-block" for="imgupload2">
                                        <input type="file" class="dropify" id="imgupload2" data-default-file="" />
                                    </label>
                                    <label class="d-block" for="imgupload3">
                                        <input type="file" class="dropify" id="imgupload3" data-default-file="" />
                                    </label>
                                    <label class="d-block" for="imgupload4">
                                        <input type="file" class="dropify" id="imgupload4" data-default-file="" />
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                    <label class="d-block" for="Color_Id1">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id1" })
                                    </label>
                                    <label class="d-block" for="Color_Id2">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id2" })
                                    </label>
                                    <label class="d-block" for="Color_Id3">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id3" })
                                    </label>
                                    <label class="d-block" for="Color_Id4">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id4" })
                                    </label>
                                </div>
                            </div>


                            <div class="form-group">
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                    <label class="d-block" for="imgupload5">
                                        <input type="file" class="dropify" id="imgupload5" data-default-file="" />
                                    </label>
                                    <label class="d-block" for="imgupload6">
                                        <input type="file" class="dropify" id="imgupload6" data-default-file="" />
                                    </label>
                                    <label class="d-block" for="imgupload7">
                                        <input type="file" class="dropify" id="imgupload7" data-default-file="" />
                                    </label>
                                    <label class="d-block" for="imgupload8">
                                        <input type="file" class="dropify" id="imgupload8" data-default-file="" />
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                    <label class="d-block" for="Color_Id5">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id5" })

                                    </label>
                                    <label class="d-block" for="Color_Id6">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id6" })
                                    </label>
                                    <label class="d-block" for="Color_Id7">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id7" })
                                    </label>
                                    <label class="d-block" for="Color_Id8">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id8" })
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                    <label class="d-block" for="imgupload9">
                                        <input type="file" class="dropify" id="imgupload9" data-default-file="" />
                                    </label>
                                    <label class="d-block" for="imgupload10">
                                        <input type="file" class="dropify" id="imgupload10" data-default-file="" />
                                    </label>
                                    <label class="d-block" for="imgupload11">
                                        <input type="file" class="dropify" id="imgupload11" data-default-file="" />
                                    </label>
                                    <label class="d-block" for="imgupload12">
                                        <input type="file" class="dropify" id="imgupload12" data-default-file="" />
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                    <label class="d-block" id="Color_Id9">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id9" })

                                    </label>
                                    <label class="d-block" for="Color_Id10">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id10" })
                                    </label>
                                    <label class="d-block" id="Color_Id11">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id11" })
                                    </label>
                                    <label class="d-block" for="Color_Id12">
                                        @Html.DropDownList("Select Color", (IEnumerable<SelectListItem>)ViewBag.ColorList, "Select Color", new { @class = "form-control", @id = "Color_Id12" })
                                    </label>
                                </div>
                            </div>

                            <div class="form-group mb-0">
                                <div class="product-buttons text-center">
                                    <button type="button" class="btn btn-primary" onclick="showMe()">Add</button>
                                    <button type="button" class="btn btn-light">Discard</button>
                                </div>
                            </div>
                            @*<div class="form-group">
                                <label class="col-form-label">Meta Description</label>
                                <textarea rows="4" cols="12"></textarea>
                                </div>
                                <div class="form-group mb-0">
                                <div class="product-buttons text-center">
                                <button type="button" class="btn btn-primary">Add</button>
                                <button type="button" class="btn btn-light">Discard</button>
                                </div>
                                </div>*@
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Product Details</h5>
                    </div>
                    <div class="card-body">
                        <div class="digital-add needs-validation">

                            <div class="form-group">
                                <label class="col-form-label"><span>*</span> Fabrics</label>
                                -                                               @Html.DropDownList("Select Fabric", (IEnumerable<SelectListItem>)ViewBag.FabricList, "Select Fabric", new { @class = "form-control", @id = "F_Id" })
                            </div>

                            <div class="form-group">
                                <label class="col-form-label"><span>*</span> Pattern</label>
                                @Html.DropDownList("Select Pattern", (IEnumerable<SelectListItem>)ViewBag.PatternList, "Select Pattern", new { @class = "form-control", @id = "P_Id" })
                            </div>

                            <div class="form-group">
                                <label class="col-form-label"><span>*</span> Saree Border</label>
                                @Html.DropDownList("Select Saree Border", (IEnumerable<SelectListItem>)ViewBag.SareeBorderList, "Select Saree Border", new { @class = "form-control", @id = "SB_Id" })
                            </div>

                            <div class="form-group">
                                <label class="col-form-label"><span>*</span>  Cloth Style</label>
                                @Html.DropDownList("Select Cloth Style", (IEnumerable<SelectListItem>)ViewBag.StyleList, "Select Style", new { @class = "form-control", @id = "CS_Id" })
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Other Details</h5>
                    </div>
                    <div class="card-body">
                        <div class="digital-add needs-validation">

                            <div class="form-group">
                                <label class="col-form-label"><span>*</span> Occasion</label>
                                @Html.DropDownList("Select Occasion", (IEnumerable<SelectListItem>)ViewBag.OccasionTypes, "Select Occasion", new { @class = "form-control", @id = "O_Id" })
                            </div>

                            <div class="form-group">
                                <label class="col-form-label"><span>*</span> Packaging Type</label>
                                @Html.DropDownList("Select Packing Type", (IEnumerable<SelectListItem>)ViewBag.PackagingTypes, "Select Packing Type", new { @class = "form-control", @id = "PT_Id" })
                            </div>

                            <div class="form-group">
                                <label class="col-form-label"><span>*</span> Saree Length</label>
                                @Html.DropDownList("Select Saree Length", (IEnumerable<SelectListItem>)ViewBag.SareeLength, "Select Saree Length", new { @class = "form-control", @id = "SL_Id" })
                            </div>

                            <div class="form-group">
                                <label class="col-form-label"><span>*</span> Blouse Piece</label>
                                <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                    <label class="d-block" for="chk_BlouseYes">
                                        <input class="radio_animated" id="chk_BlouseYes" type="radio" name="rdo-ani">
                                        Yes
                                    </label>
                                    <label class="d-block" for="chk_BlouseNo">
                                        <input class="radio_animated" id="chk_BlouseNo" type="radio" name="rdo-ani">
                                        No
                                    </label>
                                </div>
                            </div>

                            <div class="form-group mb-0">
                                <div class="product-buttons text-center">
                                    <button type="button" class="btn btn-primary" onclick="showMe()">Add</button>
                                    <button type="button" class="btn btn-light">Discard</button>
                                </div>
                            </div>

                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Container-fluid Ends-->
}
<input type="hidden" id="hdnColorValue" />

@section Scripts{
<script type="text/javascript">
            $(document).ready(function () {
                var ColorValue = $('#NoColor').val();
                var formData = new FormData();
                formData.append("ColorValue", ColorValue);
                if (ColorValue == 0) {
                    $("#divShowUploadImages").addClass("hide");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("ShowDivImages","Product")',
                        data: formData,
                        dataType: 'json',
                        contentType: false,
                        processData: false,
                        success: function (data) {
                            if (data.status) {
                                $("#divShowUploadImages").addClass("show");
                                $('#divShowUploadImages').html(data.html);
                                $(".dropify").dropify();
                            }
                        }

                    });
                }
                $(".dropify").dropify();
            });
            function showMe() {
                debugger;
                //var img1 = $("#imgupload1").get(0).files;
                //var img1 = $("#imgupload2").get(0).files;
                //var img1 = $("#imgupload3").get(0).files;
                //var img1 = $("#imgupload4").get(0).files;
                //var img1 = $("#imgupload5").get(0).files;

                // Create FormData object
                var fileData = new FormData();

                var tempColorIdArray = new Array();

                var TempArr = [];
                var ColorValue = $('#NoColor').val();
                $('#hdnColorValue').val(1);
                if (ColorValue > 0) {
                    // Looping over all files and add it to FormData object
                    for (var i = 1; i <= ColorValue; i++) {
                        if ($("#imgupload" + i).get(0).files.length == 0 && $('#Color_Id' + i).val() == 0) {
                            console.log('No Files Selected');
                            $('#hdnColorValue').val(0);
                        }
                    }
                }

                if ($('#hdnColorValue').val() == 1) {
                    // Looping over all files and add it to FormData object
                    for (var i = 1; i <= ColorValue; i++) {
                        if ($("#imgupload" + i).get(0).files.length != 0 && $('#Color_Id' + i).val() != 0) {
                            var colorId = $('#Color_Id' + i).val();
                            var qty = $('#Qty_Id' + i).val();
                            var fileUpload = $("#imgupload" + i).get(0);
                            var files = fileUpload.files;
                            fileData.append('ProductImages', files[0]);

                            var tmp = {
                                'ColorId': colorId,
                                'Image': files[0].name,
                            };
                            TempArr.push(tmp);
                        }
                    }

                    //var ColorIdJoin = tempColorIdArray.join(",");
                    //var ColorNameJoin = tempColorNameArray.join(",");
                    fileData.append("ProductName", $('#txt_productName').val());
                    fileData.append("ProductDescription", $('#product_Description').val());
                    fileData.append("ImageIds", JSON.stringify(TempArr));
                    fileData.append("MinOrder", $('#txt_minOrder').val());
                    fileData.append("PricePerPiece", $('#txt_priceperPiece').val());
                    fileData.append("MRPPerPiece", $('#txt_mrpperPiece').val());
                    fileData.append("HSNCode", $('#txt_hsnCode').val());
                    fileData.append("SKUId", $('#txt_skuId').val());
                    fileData.append("FabricId", $('#F_Id').val());
                    fileData.append("PatternId", $('#P_Id').val());
                    fileData.append("SareeBorderId", $('#SB_Id').val());
                    fileData.append("StyleId", $('#CS_Id').val());
                    fileData.append("Occasion", $('#O_Id option:selected').text());
                    fileData.append("PackageType", $('#PT_Id option:selected').text());
                    fileData.append("SareeLength", $('#SL_Id option:selected').text());
                    fileData.append("CateogryId", $('#Category_Id').val());
                    fileData.append("SubCategoryId", $('#SubCategory_Id').val());
                    fileData.append("chkBlouse", $('#chk_BlouseYes').val());

                    for (var pair of fileData.entries()) {
                        console.log(pair[0] + " - " + pair[1]);
                    }


                    $.ajax({
                        url: '@Url.Action("Manage","Product", new { Area = "Admin" })',
                        type: "POST",
                        contentType: false, // Not to set any content header
                        processData: false, // Not to process data
                        data: fileData,
                        dataType: 'json',
                        success: function (result) {
                            alert(result);
                        },
                        error: function (err) {
                            alert(err.statusText);
                        }
                    });
                }
            }

            //  Multi select drop down list
            //$('.select2').each(function () {
            //    $(this)
            //    .wrap('<div class="position-relative"></div>')
            //    .select2({
            //        dropdownParent: $(this).parent(),
            //        allowClear: true,
            //        closeOnSelect: true,
            //        //maximumSelectionLength: 3
            //    });
            //})

            function showImages() {
                var ColorValue = $('#NoColor').val();
                var formData = new FormData();
                formData.append("ColorValue", ColorValue);
                if (ColorValue == 0) {
                    $("#divShowUploadImages").addClass("hide");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("ShowDivImages","Product")',
                        data: formData,
                        dataType: 'json',
                        contentType: false,
                        processData: false,
                        success: function (data) {
                            if (data.status) {
                                $("#divShowUploadImages").addClass("show");
                                $('#divShowUploadImages').html(data.html);
                                $(".dropify").dropify();
                            }
                        }

                    });
                }
            }

</script>
}